(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[39],{5977:function(e,t,r){Promise.resolve().then(r.bind(r,5562))},5562:function(e,t,r){"use strict";r.d(t,{default:function(){return u}});var a=r(7437),s=r(2265),n=r(7648),c=r(588),l=r(3549),i=r(7618),o=r(9065),d=r(7339);function u(e){let{metadata:t,slug:r,styles:u}=e,[f,h]=(0,s.useState)(null),[m,g]=(0,s.useState)(!0),[j,k]=(0,s.useState)(null),[S,x]=function(){let[e,t]=(0,s.useState)(()=>{try{let e=localStorage.getItem("stalkerArts_sortSettings");if(e){let t=JSON.parse(e);return{key:t.key||"",order:t.order||"asc"}}}catch(e){console.error(e)}return{key:"",order:"asc"}});return[e,e=>{t(t=>{let r={...t,...e};return localStorage.setItem("stalkerArts_sortSettings",JSON.stringify(r)),r})}]}(),[y,N]=function(){let[e,t]=(0,s.useState)(()=>{try{let e=localStorage.getItem("stalkerArts_rawStats");if(null===e)return localStorage.setItem("stalkerArts_rawStats","false"),!1;return"true"===e}catch(e){return console.error(e),!1}});return[e,e=>{t(e),localStorage.setItem("stalkerArts_rawStats",String(e))}]}(),[v,p]=(0,s.useState)(0);if((0,s.useEffect)(()=>{let e=document.createElement("style");return e.innerText=u,document.head.appendChild(e),()=>{document.head.removeChild(e)}},[u]),(0,s.useEffect)(()=>{(async()=>{try{if(!t.dataFiles)throw Error("dataFiles отсутствуют в метаданных");let e=Object.keys(t.dataFiles),a=e.map(e=>fetch((0,d.D)("/games/".concat(r,"/").concat(e,".json")))),s=await Promise.all(a);if(!s.every(e=>e.ok))throw Error("Ошибка загрузки данных");let n=await Promise.all(s.map(e=>e.json())),c={};e.forEach((e,t)=>{c[e]=n[t]}),h(c),g(!1)}catch(e){k(e instanceof Error?e.message:"Неизвестная ошибка"),g(!1)}})()},[]),(0,s.useEffect)(()=>{f&&p(Object.keys(f.artifacts).length)},[f]),m)return(0,a.jsx)("div",{className:"container",children:(0,a.jsx)("div",{className:"loading",children:"Загрузка артефактов..."})});if(j)return(0,a.jsx)("div",{className:"container",children:(0,a.jsxs)("div",{className:"error",children:["Ошибка загрузки артефактов: ",j]})});if(!f)return(0,a.jsx)("div",{className:"container",children:(0,a.jsx)("div",{className:"loading",children:"Загрузка артефактов..."})});let w=(0,c.$)(f.artifacts,f.strings,S.key,S.order);return(0,a.jsx)("main",{children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("header",{children:(0,a.jsxs)("h1",{children:["Артефакты | ",t.title]})}),(0,a.jsx)("nav",{className:"breadcrumbs",children:(0,a.jsx)(n.default,{href:"/",className:"form-control stalker-link back-link",children:"На главную"})}),(0,a.jsx)("div",{className:"settings-bar",style:{marginTop:"var(--spacing-lg2)"},children:(0,a.jsxs)("div",{id:"config",className:"config",children:[(0,a.jsx)(o.Z,{checked:y,onChange:N}),(0,a.jsx)(i.Z,{artifacts:f.artifacts,sortKey:S.key,sortOrder:S.order,onSortKeyChange:e=>{x({key:e})},onSortOrderChange:e=>{x({order:e})},onResetSort:()=>{x({key:"",order:"asc"})}})]})}),(0,a.jsx)("div",{id:"artifactsContainer",className:"artifacts-container",children:w.map(e=>{let[r,s]=e;return(0,a.jsx)(l.Z,{id:r,artifactStats:s,gameData:f,showRawValues:y,mod:t.mod||""},r)})}),(0,a.jsxs)("div",{id:"totalCount",className:"total-count",children:["Всего артефактов: ",v]})]})})}}},function(e){e.O(0,[706,614,972,449,253,971,117,744],function(){return e(e.s=5977)}),_N_E=e.O()}]);