(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[39],{5977:function(e,t,r){Promise.resolve().then(r.bind(r,5562))},5562:function(e,t,r){"use strict";r.d(t,{default:function(){return d}});var s=r(7437),a=r(2265),n=r(7648),i=r(588),l=r(3549),c=r(7618),o=r(9065);function d(e){var t,r;let{metadata:d,slug:u}=e,[h,f]=(0,a.useState)(null),[m,j]=(0,a.useState)(!0),[x,g]=(0,a.useState)(null),[k,v]=function(){let[e,t]=(0,a.useState)(()=>{try{let e=localStorage.getItem("stalkerArts_sortSettings");if(e){let t=JSON.parse(e);return{key:t.key||"",order:t.order||"asc"}}}catch(e){console.error(e)}return{key:"",order:"asc"}});return[e,e=>{t(t=>{let r={...t,...e};return localStorage.setItem("stalkerArts_sortSettings",JSON.stringify(r)),r})}]}(),[S,N]=function(){let[e,t]=(0,a.useState)(()=>{try{let e=localStorage.getItem("stalkerArts_rawStats");if(null===e)return localStorage.setItem("stalkerArts_rawStats","false"),!1;return"true"===e}catch(e){return console.error(e),!1}});return[e,e=>{t(e),localStorage.setItem("stalkerArts_rawStats",String(e))}]}();if((0,a.useEffect)(()=>{(async()=>{try{if(!d.dataFiles)throw Error("dataFiles отсутствуют в метаданных");let e=Object.keys(d.dataFiles),t=e.map(e=>fetch("/games/".concat(u,"/").concat(e,".json"))),r=await Promise.all(t);if(!r.every(e=>e.ok))throw Error("Ошибка загрузки данных");let s=await Promise.all(r.map(e=>e.json())),a={};e.forEach((e,t)=>{a[e]=s[t]}),f(a),j(!1)}catch(e){g(e instanceof Error?e.message:"Неизвестная ошибка"),j(!1)}})()},[]),!(null===(t=d.dataFiles)||void 0===t?void 0:t.artifacts)||!(null===(r=d.dataFiles)||void 0===r?void 0:r.strings))return(0,s.jsx)("main",{children:(0,s.jsxs)("div",{className:"container",children:[(0,s.jsxs)("header",{children:[(0,s.jsxs)("h1",{children:["\uD83D\uDD39 Артефакты: ",d.title," \uD83D\uDD39"]}),(0,s.jsx)("div",{style:{padding:"2rem",textAlign:"center"},children:(0,s.jsx)("p",{children:d.description||"Скоро..."})})]}),(0,s.jsx)("nav",{className:"breadcrumbs",children:(0,s.jsx)(n.default,{href:"/",className:"form-control stalker-link back-link",children:"На главную"})})]})});if(m)return(0,s.jsx)("div",{className:"container",children:(0,s.jsx)("div",{className:"loading",children:"Загрузка артефактов..."})});if(x)return(0,s.jsx)("div",{className:"container",children:(0,s.jsxs)("div",{className:"error",children:["Ошибка загрузки артефактов: ",x]})});if(!h)return(0,s.jsx)("div",{className:"container",children:(0,s.jsx)("div",{className:"loading",children:"Загрузка артефактов..."})});let y=(0,i.$)(h.artifacts,h.strings,k.key,k.order),D=Object.keys(h.artifacts).length;return(0,s.jsx)("main",{children:(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)("header",{children:(0,s.jsxs)("h1",{children:["\uD83D\uDD39 Артефакты: ",d.title," \uD83D\uDD39"]})}),(0,s.jsx)("nav",{className:"breadcrumbs",children:(0,s.jsx)(n.default,{href:"/",className:"form-control stalker-link back-link",children:"На главную"})}),(0,s.jsx)("div",{className:"settings-bar",children:(0,s.jsxs)("div",{id:"config",className:"config",children:[(0,s.jsx)(o.Z,{checked:S,onChange:N}),(0,s.jsx)(c.Z,{artifacts:h.artifacts,sortKey:k.key,sortOrder:k.order,onSortKeyChange:e=>{v({key:e})},onSortOrderChange:e=>{v({order:e})},onResetSort:()=>{v({key:"",order:"asc"})}})]})}),(0,s.jsx)("div",{id:"artifactsContainer",className:"artifacts-container",children:y.map(e=>{let[t,r]=e;return(0,s.jsx)(l.Z,{id:t,artifactStats:r,gameData:h,showRawValues:S},t)})}),(0,s.jsxs)("div",{id:"totalCount",className:"total-count",children:["Всего артефактов: ",D]})]})})}}},function(e){e.O(0,[972,700,971,117,744],function(){return e(e.s=5977)}),_N_E=e.O()}]);